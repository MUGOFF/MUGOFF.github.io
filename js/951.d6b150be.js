"use strict";(self["webpackChunkmanual_project"]=self["webpackChunkmanual_project"]||[]).push([[951],{9951:function(e,t,a){a.r(t),a.d(t,{default:function(){return qe}});var n=a(3396),l=a(7139),c=a(9242);const o={class:"container"},r=(0,n._)("div",null,"AccountManagement Page",-1),u={class:"d-flex flex-row-reverse"},i=(0,n._)("button",{type:"button",class:"btn m-2 btn-primary","data-bs-toggle":"modal","data-bs-target":"#accoutadd"}," 계좌 추가 ",-1),d=(0,n._)("p",{class:"text-center bg-light fw-bold fs-3","data-bs-toggle":"collapse","data-bs-target":"#banktable","aria-expanded":"true","aria-controls":"banktable"}," 은행 ",-1),s={class:"table-responsive collapse show",id:"banktable"},_={class:"table tableborderd table-hover table-sm"},p=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"No"),(0,n._)("th",null,"이름"),(0,n._)("th",null,"은행"),(0,n._)("th",null,"계좌번호"),(0,n._)("th",null,"계좌종류"),(0,n._)("th",null,"비고")])],-1),m=["value"],b=(0,n._)("p",{class:"text-center bg-light fw-bold fs-3","data-bs-toggle":"collapse","data-bs-target":"#cardtable","aria-expanded":"true","aria-controls":"cardtable"}," 카드 ",-1),f={class:"table-responsive collapse show",id:"cardtable"},y={class:"table tableborderd table-hover table-sm"},h=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"No"),(0,n._)("th",null,"이름"),(0,n._)("th",null,"카드회사"),(0,n._)("th",null,"카드번호"),(0,n._)("th",null,"카드종류"),(0,n._)("th",null,"카드만기"),(0,n._)("th",null,"연결계좌"),(0,n._)("th",null,"비고")])],-1),k=["value"],g=(0,n._)("p",{class:"text-center bg-light fw-bold fs-3","data-bs-toggle":"collapse","data-bs-target":"#paytable","aria-expanded":"true","aria-controls":"paytable"}," 페이 ",-1),w={class:"table-responsive collapse show",id:"paytable"},v={class:"table tableborderd table-hover table-sm"},x=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"No"),(0,n._)("th",null,"이름"),(0,n._)("th",null,"페이이름"),(0,n._)("th",null,"연결계좌"),(0,n._)("th",null,"연결카드"),(0,n._)("th",null,"비고")])],-1),D=["value"],q={class:"modal fade",id:"accoutadd","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"accoutaddLabel","aria-hidden":"true"},z={class:"modal-dialog"},V={class:"modal-content"},U=(0,n._)("div",{class:"modal-header"},[(0,n._)("h1",{class:"modal-title fs-5",id:"accoutaddLabel"},"Modal title"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),H={class:"modal-body"},Z=(0,n._)("label",{class:"form-check-label mx-1",for:"bank"},"은행·증권",-1),M=(0,n._)("label",{class:"form-check-label mx-1",for:"card"},"카드",-1),Y=(0,n._)("label",{class:"form-check-label mx-1",for:"pay"},"페이",-1),K={class:"modal-body"},S={class:"input-group mb-2"},j=(0,n._)("label",{class:"form-label mx-2"},"이름",-1),N={class:"input-group mb-2"},O={key:0,class:"form-label mx-2"},C={key:1,class:"form-label mx-2"},L={key:2,class:"form-label mx-2"},A={key:0,class:"input-group mb-2"},E={key:0,class:"form-label mx-2"},G={key:1,class:"form-label mx-2"},T={key:1,class:"input-group mb-2"},B={key:0,class:"form-label mx-2"},F={key:1,class:"form-label mx-2"},R=(0,n.uE)('<datalist id="account_type"><option value="입출금계좌"></option><option value="정기예금계좌"></option><option value="정기적금계좌"></option><option value="예탁금"></option></datalist>',1),$=(0,n._)("datalist",{id:"card_type"},[(0,n._)("option",{value:"체크카드"}),(0,n._)("option",{value:"신용카드"}),(0,n._)("option",{value:"선불카드"})],-1),I={key:2,class:"input-group mb-2"},P=(0,n._)("label",{class:"form-label mx-2"},"연동 계좌",-1),J={id:"connected_account"},Q=["value"],W={key:3,class:"input-group mb-2"},X=(0,n._)("label",{class:"form-label mx-2"},"카드 만기",-1),ee={id:"expiredmonth"},te=["value"],ae=(0,n._)("span",{class:"input-group-text"},"월",-1),ne=(0,n._)("span",{class:"input-group-text"},"년",-1),le={key:4,class:"input-group mb-2"},ce=(0,n._)("label",{class:"form-label mx-2"},"연동 계좌",-1),oe={class:"dropdown-menu"},re={class:"form-check"},ue=["value"],ie={class:"form-check-label"},de={key:5,class:"input-group mb-2"},se=(0,n._)("label",{class:"form-label mx-2"},"연동 카드",-1),_e={class:"dropdown-menu"},pe={class:"form-check dropdown-item"},me=["value"],be={class:"form-check-label"},fe={class:"input-group mb-2"},ye=(0,n._)("label",{class:"form-label mx-2"},"비고",-1),he=(0,n._)("div",{class:"modal-footer"},[(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 닫기 "),(0,n._)("button",{type:"submit",class:"btn btn-primary"},"확인")],-1),ke=(0,n._)("dialog",null,[(0,n._)("form",{method:"dialog"},[(0,n._)("div",{id:"dialog_body",class:"container text-start"},"field_text"),(0,n._)("button",{class:"m-2 btn btn-secondary",value:"close"},"취소"),(0,n._)("button",{class:"m-2 btn btn-info","data-bs-dismiss":"modal","data-bs-target":"#accoutadd",value:"confirm"}," 확인 ")])],-1);function ge(e,t,a,ge,we,ve){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[r,(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn m-2 btn-danger",onClick:t[0]||(t[0]=(...e)=>ve.delete_account&&ve.delete_account(...e))}," 계좌 삭제 "),i]),d,(0,n._)("div",s,[(0,n._)("table",_,[p,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.account_table,((e,a)=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",null,(0,l.zw)(a+1),1),(0,n._)("td",null,(0,l.zw)(e.nickname),1),(0,n._)("td",null,(0,l.zw)(e.bankname),1),(0,n._)("td",null,(0,l.zw)(e.accountnumber),1),(0,n._)("td",null,(0,l.zw)(e.account_type),1),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",value:{0:e.accountnumber,1:"bank"},"onUpdate:modelValue":t[1]||(t[1]=e=>we.delete_candidate=e)},null,8,m),[[c.e8,we.delete_candidate]])])])))),128))])])]),b,(0,n._)("div",f,[(0,n._)("table",y,[h,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.card_table,((e,a)=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",null,(0,l.zw)(a+1),1),(0,n._)("td",null,(0,l.zw)(e.nickname),1),(0,n._)("td",null,(0,l.zw)(e.corpname),1),(0,n._)("td",null,(0,l.zw)(e.cardnumber),1),(0,n._)("td",null,(0,l.zw)(e.card_type),1),(0,n._)("td",null,(0,l.zw)(e.expiredmonth),1),(0,n._)("td",null,(0,l.zw)(e.bankconnect),1),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",value:{0:e.cardnumber,1:"card"},"onUpdate:modelValue":t[2]||(t[2]=e=>we.delete_candidate=e)},null,8,k),[[c.e8,we.delete_candidate]])])])))),128))])])]),g,(0,n._)("div",w,[(0,n._)("table",v,[x,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.pay_table,((e,a)=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",null,(0,l.zw)(a+1),1),(0,n._)("td",null,(0,l.zw)(e.nickname),1),(0,n._)("td",null,(0,l.zw)(e.corpname),1),(0,n._)("td",null,(0,l.zw)(e.bankconnection),1),(0,n._)("td",null,(0,l.zw)(e.cardconnection),1),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",value:{0:e.id,1:"pay"},"onUpdate:modelValue":t[3]||(t[3]=e=>we.delete_candidate=e)},null,8,D),[[c.e8,we.delete_candidate]])])])))),128))])])])]),(0,n._)("div",q,[(0,n._)("div",z,[(0,n._)("div",V,[U,(0,n._)("div",H,[(0,n.wy)((0,n._)("input",{type:"radio",name:"base_type",id:"bank",class:"form-check-input",value:"bank","onUpdate:modelValue":t[4]||(t[4]=e=>we.fi_type=e)},null,512),[[c.G2,we.fi_type]]),Z,(0,n.wy)((0,n._)("input",{type:"radio",name:"base_type",id:"card",class:"form-check-input",value:"card","onUpdate:modelValue":t[5]||(t[5]=e=>we.fi_type=e)},null,512),[[c.G2,we.fi_type]]),M,(0,n.wy)((0,n._)("input",{type:"radio",name:"base_type",id:"pay",class:"form-check-input",value:"pay","onUpdate:modelValue":t[6]||(t[6]=e=>we.fi_type=e)},null,512),[[c.G2,we.fi_type]]),Y]),(0,n._)("form",{id:"ADD_FORM",onSubmit:t[20]||(t[20]=(0,c.iM)((e=>ve.add_account()),["prevent"]))},[(0,n._)("div",K,[(0,n._)("div",S,[j,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>we.account_form.name=e),required:""},null,512),[[c.nr,we.account_form.name]])]),(0,n._)("div",N,["bank"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",O,"은행명 ")):(0,n.kq)("",!0),"card"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",C,"회사명 ")):(0,n.kq)("",!0),"pay"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",L,"페이명")):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>we.account_form.corp=e),required:""},null,512),[[c.nr,we.account_form.corp]])]),"pay"!==we.fi_type?((0,n.wg)(),(0,n.iD)("div",A,["bank"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",E,"계좌번호")):(0,n.kq)("",!0),"card"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",G,"카드번호")):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",pattern:"^[0-9]*$",size:"20",maxlength:"20","onUpdate:modelValue":t[9]||(t[9]=e=>we.account_form.accountnumber=e),placeholder:"'-' 제외",required:""},null,512),[[c.nr,we.account_form.accountnumber]])])):(0,n.kq)("",!0),"pay"!==we.fi_type?((0,n.wg)(),(0,n.iD)("div",T,["bank"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",B,"계좌종류")):(0,n.kq)("",!0),"card"===we.fi_type?((0,n.wg)(),(0,n.iD)("label",F,"카드종류")):(0,n.kq)("",!0),"bank"===we.fi_type?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:2,type:"text",class:"form-control",list:"account_type","onUpdate:modelValue":t[10]||(t[10]=e=>we.account_form.type=e),required:""},null,512)),[[c.nr,we.account_form.type]]):(0,n.kq)("",!0),R,"card"===we.fi_type?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:3,type:"text",class:"form-control",list:"card_type","onUpdate:modelValue":t[11]||(t[11]=e=>we.account_form.type=e),required:""},null,512)),[[c.nr,we.account_form.type]]):(0,n.kq)("",!0),$])):(0,n.kq)("",!0),"card"===we.fi_type?((0,n.wg)(),(0,n.iD)("div",I,[P,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",list:"connected_account","onUpdate:modelValue":t[12]||(t[12]=e=>we.account_form.connection=e),size:"6",required:""},null,512),[[c.nr,we.account_form.connection]]),(0,n._)("datalist",J,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.account_table,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e.accountnumber},(0,l.zw)(e.nickname),9,Q)))),128))])])):(0,n.kq)("",!0),"card"===we.fi_type?((0,n.wg)(),(0,n.iD)("div",W,[X,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",list:"expiredmonth","onUpdate:modelValue":t[13]||(t[13]=e=>we.account_form.expiredmonth=e),required:""},null,512),[[c.nr,we.account_form.expiredmonth]]),(0,n._)("datalist",ee,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.d_month,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e},null,8,te)))),128))]),ae,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>we.account_form.expiredyear=e),required:""},null,512),[[c.nr,we.account_form.expiredyear]]),ne])):(0,n.kq)("",!0),"pay"===we.fi_type?((0,n.wg)(),(0,n.iD)("div",le,[ce,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","data-bs-toggle":"dropdown","aria-expanded":"false","onUpdate:modelValue":t[15]||(t[15]=e=>ve.connect_account_checking=e),readonly:""},null,512),[[c.nr,ve.connect_account_checking]]),(0,n._)("ul",oe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.account_table,((e,a)=>((0,n.wg)(),(0,n.iD)("li",{class:"dropdown-item",key:a},[(0,n._)("div",re,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>we.account_form.connection_bank=e),value:e.accountnumber},null,8,ue),[[c.e8,we.account_form.connection_bank]]),(0,n._)("label",ie,(0,l.zw)(e.nickname),1)])])))),128))])])):(0,n.kq)("",!0),"pay"===we.fi_type?((0,n.wg)(),(0,n.iD)("div",de,[se,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","data-bs-toggle":"dropdown","aria-expanded":"false","onUpdate:modelValue":t[17]||(t[17]=e=>ve.connect_card_checking=e),readonly:""},null,512),[[c.nr,ve.connect_card_checking]]),(0,n._)("ul",_e,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(we.card_table,((e,a)=>((0,n.wg)(),(0,n.iD)("li",{class:"dropdown-item",key:a},[(0,n._)("div",pe,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=e=>we.account_form.connection_card=e),value:e.cardnumber},null,8,me),[[c.e8,we.account_form.connection_card]]),(0,n._)("label",be,(0,l.zw)(e.nickname),1)])])))),128))])])):(0,n.kq)("",!0),(0,n._)("div",fe,[ye,(0,n.wy)((0,n._)("textarea",{type:"text",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=e=>we.account_form.description=e)},null,512),[[c.nr,we.account_form.description]])])]),he],32)])])]),ke],64)}a(7658);var we=a(5939),ve={name:"AccountManagement",data(){return{account_table:{},card_table:{},pay_table:{},d_month:[1,2,3,4,5,6,7,8,9,10,11,12],fi_type:"bank",delete_candidate:[],account_form:{name:"",corp:"",type:"",accountnumber:"",connection:"",connection_bank:[],connection_card:[],expiredmonth:"",expiredyear:"",description:""}}},computed:{connect_account_checking:function(){let e=[];for(let t of this.account_table)Object.values(this.account_form.connection_bank).includes(t.accountnumber)&&e.push(t.nickname);return e},connect_card_checking:function(){let e=[];for(let t of this.card_table)Object.values(this.account_form.connection_card).includes(t.cardnumber)&&e.push(t.nickname);return e}},mounted(){this.get_table()},methods:{get_table(){we.Z.get("api/v1/account_management/bank_account/").then((e=>{this.account_table=e.data})).catch((e=>{console.error(e)})),we.Z.get("api/v1/account_management/card_account/").then((e=>{this.card_table=e.data})).catch((e=>{console.error(e)})),we.Z.get("api/v1/account_management/pay_account/").then((e=>{this.pay_table=e.data})).catch((e=>{console.error(e)}))},add_account(){let e=/^[0-9]{4}$/;if(!e.test(this.expiredyear)&&"card"===this.fi_type)return alert("만료년도를 4자리 숫자로 표시하세요"),!1;const t=document.querySelector("dialog"),a=t.querySelector("#dialog_body"),n=document.getElementById("ADD_FORM"),l=n.getElementsByClassName("input-group");let c="";for(const[o]of Object.entries(l)){for(const[e]of Object.entries(l[o].children))l[o].children[e].classList.value.includes("form-label")&&(c=c+l[o].children[e].innerText+" : "),"form-control"===l[o].children[e].className&&(c+=l[o].children[e].value),"input-group-text"===l[o].children[e].className&&(c+=l[o].children[e].innerText);c+="<br>"}"bank"===this.fi_type?c+="<br>위 정보로 계좌를 추가합니다.":"card"===this.fi_type?c+="<br>위 정보로 카드를 추가합니다.":c+="<br>위 정보로 페이를 추가합니다.",a.innerHTML=c,t.addEventListener("close",(()=>{const e=t.returnValue;"confirm"===e&&("bank"===this.fi_type?we.Z.post("api/v1/account_management/bank_account/",{nickname:this.account_form.name,bankname:this.account_form.corp,accountnumber:this.account_form.accountnumber,account_type:this.account_form.type,description:this.account_form.description}).then((e=>{console.log(e),alert("Success"),this.get_table()})).catch((e=>{console.error(e)})):"card"===this.fi_type?we.Z.post("api/v1/account_management/card_account/",{nickname:this.account_form.name,corpname:this.account_form.corp,cardnumber:this.account_form.accountnumber,card_type:this.account_form.type,bankconnect:this.account_form.connection,description:this.account_form.description}).then((e=>{console.log(e),alert("Success"),this.get_table()})).catch((e=>{console.error(e)})):we.Z.post("api/v1/account_management/pay_account/",{nickname:this.account_form.name,corpname:this.account_form.corp,assetamount:this.account_form.accountnumber,description:this.account_form.description,bankconnection:this.account_form.connection_bank,cardconnection:this.account_form.connection_card}).then((e=>{console.log(e),alert("Success"),this.get_table()})).catch((e=>{console.log(e)})))}),{once:!0}),t.showModal()},delete_account(){const e=confirm("선택된 계좌들을 삭제합니까?");if(e){let e=[];this.delete_candidate.map((t=>{"bank"==t[1]&&e.push("api/v1/account_management/bank_account/"+t[0]),"card"==t[1]&&e.push("api/v1/account_management/card_account/"+t[0]),"pay"==t[1]&&e.push("api/v1/account_management/pay_account/"+t[0])})),we.Z.all(e.map((e=>we.Z["delete"](e)))).then((()=>{alert("Success"),this.get_table()})).catch((e=>{console.log(e)}))}}}},xe=a(89);const De=(0,xe.Z)(ve,[["render",ge]]);var qe=De}}]);
//# sourceMappingURL=951.d6b150be.js.map