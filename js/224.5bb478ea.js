"use strict";(self["webpackChunkmanual_project"]=self["webpackChunkmanual_project"]||[]).push([[224],{7421:function(a,t,n){n.d(t,{Z:function(){return m}});var o=n(3396),e=n(7139);const c=["onDblclick"];function s(a,t,n,s,i,r){return(0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.hashtags,((a,t)=>((0,o.wg)(),(0,o.iD)("span",{key:t,class:"hashtag",onDblclick:a=>r.removeHashtag(t)},"#"+(0,e.zw)(a),41,c)))),128))])}var i={props:{hashtags:{type:Array,default:()=>[]}},methods:{removeHashtag(a){this.$emit("remove-hashtag",a)}}},r=n(89);const l=(0,r.Z)(i,[["render",s]]);var m=l},2224:function(a,t,n){n.r(t),n.d(t,{default:function(){return E}});var o=n(3396),e=n(9242),c=n(7139);const s={class:"container text-start"},i={class:"m-2"},r=(0,o._)("label",{for:"time",class:"form-label"},"시간",-1),l={class:"m-2"},m=(0,o._)("label",{for:"bank",class:"form-label"},"은행",-1),h=["value"],_={class:"m-2"},d=(0,o._)("label",{for:"card",class:"form-label"},"카드",-1),u=(0,o._)("option",{value:null,selected:""},"----------",-1),p=["value"],g={class:"m-2"},y=(0,o._)("label",{for:"to-name",class:"form-label"},"거래내역",-1),b={class:"input-group"},f={id:"company-names"},w=["value"],v=(0,o._)("span",{class:"input-group-text"},"내역 별칭",-1),k={key:1,class:"btn btn-primary"},H={class:"m-2"},D=(0,o._)("label",{for:"category",class:"form-label"},"항목",-1),C={class:"input-group"},x=(0,o._)("span",{class:"input-group-text"},"고정 항목",-1),Z={class:"m-2"},U=(0,o._)("label",{for:"hashtags",class:"form-label"},"해쉬태그",-1),V=["size"],$={class:"m-2"},M=(0,o._)("label",{for:"deposit",class:"form-label"},"입금금액",-1),Y={class:"m-2"},q=(0,o._)("label",{for:"withdrawal",class:"form-label"}," 출금금액",-1),T={class:"m-2"},j=(0,o._)("label",{for:"description",class:"form-label"},"비고",-1),z={class:"text-center m-3"},A={key:0},I={key:1};function K(a,t,n,K,F,L){const O=(0,o.up)("Hashtag");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",{id:"delete-button",class:"text-end",onClick:t[0]||(t[0]=a=>L.delete_transition())}," x 거래내역 삭제 "),(0,o._)("div",i,[r,(0,o.wy)((0,o._)("input",{type:"datetime-local",class:"form-control",id:"time","onUpdate:modelValue":t[1]||(t[1]=a=>F.transaction.transaction_time=a),onChange:t[2]||(t[2]=a=>L.component_change())},null,544),[[e.nr,F.transaction.transaction_time]])]),(0,o._)("div",l,[m,(0,o.wy)((0,o._)("select",{id:"bank",class:"form-select","onUpdate:modelValue":t[3]||(t[3]=a=>F.transaction.transaction_from=a),onChange:t[4]||(t[4]=a=>L.component_change()),required:""},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(F.account_table,(a=>((0,o.wg)(),(0,o.iD)("option",{key:a,value:a.accountnumber},(0,c.zw)(a.nickname),9,h)))),128))],544),[[e.bM,F.transaction.transaction_from]])]),(0,o._)("div",_,[d,(0,o.wy)((0,o._)("select",{id:"card",class:"form-select","onUpdate:modelValue":t[5]||(t[5]=a=>F.transaction.transaction_from_card=a),onChange:t[6]||(t[6]=a=>L.component_change())},[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(F.card_table,(a=>((0,o.wg)(),(0,o.iD)("option",{key:a,value:a.cardnumber},(0,c.zw)(a.nickname),9,p)))),128))],544),[[e.bM,F.transaction.transaction_from_card]])]),(0,o._)("div",g,[y,(0,o._)("div",b,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"to-name",list:"company-names","onUpdate:modelValue":t[7]||(t[7]=a=>F.transaction.transaction_to_name=a),onChange:t[8]||(t[8]=a=>L.component_change())},null,544),[[e.nr,F.transaction.transaction_to_name]]),(0,o._)("datalist",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(F.company_table,((a,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:a.company_accountname},null,8,w)))),128))]),L.exist_history_name?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-secondary",onClick:t[9]||(t[9]=a=>L.post_history_name())}," 등록 ")),v,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"to-nickname","onUpdate:modelValue":t[10]||(t[10]=a=>F.to_company.company_commonname=a),onChange:t[11]||(t[11]=a=>L.history_change())},null,544),[[e.nr,F.to_company.company_commonname]]),F.history_changed?((0,o.wg)(),(0,o.iD)("button",k,"수정")):(0,o.kq)("",!0)])]),(0,o._)("div",H,[D,(0,o._)("div",C,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[12]||(t[12]=a=>F.transaction.main_category=a),onChange:t[13]||(t[13]=a=>L.component_change())},null,544),[[e.nr,F.transaction.main_category]]),x,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"to-nickname","onUpdate:modelValue":t[14]||(t[14]=a=>F.to_company.category_hook=a),onChange:t[15]||(t[15]=a=>L.component_change())},null,544),[[e.nr,F.to_company.category_hook]])])]),(0,o._)("div",Z,[U,(0,o._)("div",{class:"form-control d-flex",id:"hashtags",onChange:t[18]||(t[18]=a=>L.component_change())},[(0,o.Wm)(O,{hashtags:F.transaction.sub_category,onRemoveHashtag:L.removeHashtag},null,8,["hashtags","onRemoveHashtag"]),(0,o.wy)((0,o._)("input",{type:"text",id:"add_hashtag",placeholder:"Add hashtag",size:0==F.newHashtag.length?7:F.newHashtag.length,"onUpdate:modelValue":t[16]||(t[16]=a=>F.newHashtag=a),onKeyup:t[17]||(t[17]=(0,e.D2)(((...a)=>L.addHashtag&&L.addHashtag(...a)),["enter"]))},null,40,V),[[e.nr,F.newHashtag]])],32)]),(0,o._)("div",$,[M,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"deposit","onUpdate:modelValue":t[19]||(t[19]=a=>F.transaction.deposit_amount=a),onChange:t[20]||(t[20]=a=>L.component_change())},null,544),[[e.nr,F.transaction.deposit_amount]])]),(0,o._)("div",Y,[q,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"withdrawal","onUpdate:modelValue":t[21]||(t[21]=a=>F.transaction.withdrawal_amount=a),onChange:t[22]||(t[22]=a=>L.component_change())},null,544),[[e.nr,F.transaction.withdrawal_amount]])]),(0,o._)("div",T,[j,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[23]||(t[23]=a=>F.transaction.description=a),onChange:t[24]||(t[24]=a=>L.component_change())},null,544),[[e.nr,F.transaction.description]])]),(0,o._)("div",z,[(0,o._)("button",{class:"btn btn-primary mx-2 btn-lg",onClick:t[25]||(t[25]=a=>L.confirm_changes())},[F.changed?((0,o.wg)(),(0,o.iD)("span",A,"수정")):((0,o.wg)(),(0,o.iD)("span",I,"확인"))]),(0,o._)("button",{class:"btn btn-secondary mx-2 btn-lg",onClick:t[26]||(t[26]=a=>L.cancel_changes())}," 취소 ")])])}n(7658);var F=n(7421),L=n(5939);const O=n(4806);var R={components:{Hashtag:F.Z},data(){return{changed:!1,history_changed:!1,transaction:{},to_company:{},account_table:{},card_table:{},company_table:{},hashtag_table:{},newHashtag:""}},computed:{exist_history_name(){const a=Object.values(this.company_table).map((a=>a.company_accountname));return a.includes(this.transaction.transaction_to_name)}},mounted(){this.get_table(),this.import_transaction_data(),this.get_hastags()},methods:{get_table(){L.Z.get("api/v1/account_management/bank_account/").then((a=>{this.account_table=a.data})).catch((a=>{console.error(a)})),L.Z.get("api/v1/account_management/card_account/").then((a=>{this.card_table=a.data})).catch((a=>{console.error(a)})),L.Z.get("api/v1/account_record/Company_nickname/").then((a=>{this.company_table=a.data})).catch((a=>{console.error(a)}))},async import_transaction_data(){this.$store.commit("setIsLoading",!0),await L.Z.get("api/v1/account_record/Transaction_All/"+this.$route.params.transactionId+"/").then((a=>{this.transaction=a.data,L.Z.get("api/v1/account_record/Company_nickname/"+this.transaction.transaction_to_name+"/").then((a=>{this.to_company=a.data})).catch((a=>{console.error(a)}))})).catch((a=>{console.log(a)})),this.$store.commit("setIsLoading",!1)},async get_hastags(){await L.Z.get("api/v1/hashtag/").then((a=>{this.hashtag_table=a.data})).catch((a=>{console.log(a)}))},delete_transition(){const a=confirm("거래내역을 삭제합니까?");a&&L.Z["delete"]("api/v1/account_record/Transaction_All/"+this.$route.params.transactionId+"/")},post_history_name(){if(""===this.to_company.company_commonname)return alert("별칭을 입력하세요"),!1;L.Z.post("api/v1/account_record/Company_nickname/",{company_accountname:this.transaction.transaction_to_name,company_commonname:this.to_company.company_commonname}).then((()=>{alert("등록 되었습니다."),this.get_table()})).catch((a=>{console.error(a)}))},addHashtag(){""!==this.newHashtag.trim()&&(this.transaction.sub_category.push(this.newHashtag.trim()),this.newHashtag="")},removeHashtag(a){this.transaction.sub_category.splice(a,1),this.changed=!0},async confirm_changes(){const a=Object.values(this.hashtag_table).map((a=>a.sub_category)),t=O.reject(this.transaction.sub_category,(t=>a.includes(t)));if(await L.Z.all(t.map((a=>L.Z.post("api/v1/account_record/Hashtag/",{sub_category:a})))).catch((a=>{console.log(a)})),this.changed){const a=confirm("변경사항을 저장합니다");if(!a)return!1;L.Z.put("api/v1/account_record/Transaction_All/"+this.$route.params.transactionId+"/",{transaction_time:this.transaction.transaction_time,transaction_from:this.transaction.transaction_from,transaction_from_card:this.transaction.transaction_from_card,transaction_to_name:this.transaction.transaction_to_name.trim(),deposit_amount:this.transaction.deposit_amount,withdrawal_amount:this.transaction.withdrawal_amount,main_category:this.transaction.main_category,sub_category:this.transaction.sub_category,description:this.transaction.description}).then((()=>{alert("변경사항이 저장되었습니다"),this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})})).catch((a=>{console.error(a)}))}else this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})},cancel_changes(){if(this.changed){const a=confirm("변경사항을 저장하지 않고 나갑니까?");if(!a)return!1}this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})},component_change(){this.changed=!0,this.exist_history_name?(this.history_changed=!1,this.to_company.company_commonname=O.find(this.company_table,{company_accountname:this.transaction.transaction_to_name}).company_commonname):this.to_company.company_commonname=""},history_change(){this.history_changed=!0}}},W=n(89);const B=(0,W.Z)(R,[["render",K]]);var E=B}}]);
//# sourceMappingURL=224.5bb478ea.js.map