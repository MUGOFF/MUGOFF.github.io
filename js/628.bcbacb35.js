"use strict";(self["webpackChunkmanual_project"]=self["webpackChunkmanual_project"]||[]).push([[628],{7421:function(a,t,n){n.d(t,{Z:function(){return m}});var o=n(3396),e=n(7139);const s=["onDblclick"];function i(a,t,n,i,r,c){return(0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.hashtags,((a,t)=>((0,o.wg)(),(0,o.iD)("span",{key:t,class:"hashtag",onDblclick:a=>c.removeHashtag(t)},"#"+(0,e.zw)(a),41,s)))),128))])}var r={props:{hashtags:{type:Array,default:()=>[]}},methods:{removeHashtag(a){this.$emit("remove-hashtag",a)}}},c=n(89);const l=(0,c.Z)(r,[["render",i]]);var m=l},628:function(a,t,n){n.r(t),n.d(t,{default:function(){return L}});var o=n(3396),e=n(7139),s=n(9242);const i={class:"container text-start"},r={class:"m-2"},c=(0,o._)("label",{for:"time",class:"form-label"},"시간",-1),l=(0,o._)("div",{id:"Time-validation",class:"invalid-feedback"},"시간을 입력하세요",-1),m={class:"m-2"},_=(0,o._)("label",{for:"bank",class:"form-label"},"은행",-1),d=["value"],u=(0,o._)("div",{id:"Bank-validation",class:"invalid-feedback"},"은행을 선택하세요",-1),h={class:"m-2"},p=(0,o._)("label",{for:"card",class:"form-label"},"카드",-1),y=(0,o._)("option",{value:null,selected:""},"----------",-1),g=["value"],b={class:"m-2"},f=(0,o._)("label",{for:"to-name",class:"form-label"},"거래내역",-1),v={class:"input-group"},w={id:"company-names"},k=["value"],H=(0,o._)("span",{class:"input-group-text"},"내역 별칭",-1),x=(0,o._)("div",{id:"To-validation",class:"invalid-feedback"}," 유효한 대상을 입력하세요(혹은 새로운 대상을 등록하세요) ",-1),D={class:"m-2"},Z=(0,o._)("label",{for:"category",class:"form-label"},"항목",-1),C={class:"input-group"},U=(0,o._)("span",{class:"input-group-text"},"고정 항목",-1),V={class:"m-2"},T=(0,o._)("label",{for:"hashtags",class:"form-label"},"해쉬태그",-1),M={class:"form-control d-flex",id:"hashtags"},Y=["size"],q={class:"m-2"},$=(0,o._)("label",{for:"deposit",class:"form-label"},"입금금액",-1),j={class:"m-2"},z=(0,o._)("label",{for:"withdrawal",class:"form-label"}," 출금금액",-1),K={class:"m-2"},A=(0,o._)("label",{for:"description",class:"form-label"},"비고",-1),F={class:"text-center m-3"},B=(0,o._)("dialog",null,[(0,o._)("form",{method:"dialog"},[(0,o._)("div",{id:"dialog_body",class:"container text-start"},"field_text"),(0,o._)("button",{class:"m-2 btn btn-secondary",value:"close"},"취소"),(0,o._)("button",{class:"m-2 btn btn-warning",value:"back"},"저장하지 않음"),(0,o._)("button",{class:"m-2 btn btn-primary",value:"save"},"저장")])],-1);function I(a,t,n,I,O,R){const W=(0,o.up)("Hashtag");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",i,[(0,o._)("div",r,[c,(0,o.wy)((0,o._)("input",{type:"datetime-local",class:(0,e.C_)(["form-control",{"is-invalid":!0===O.try_post&&""===O.transaction.transaction_time}]),id:"time","onUpdate:modelValue":t[0]||(t[0]=a=>O.transaction.transaction_time=a),"aria-describedby":"Time-validation",required:""},null,2),[[s.nr,O.transaction.transaction_time]]),l]),(0,o._)("div",m,[_,(0,o.wy)((0,o._)("select",{id:"bank",class:(0,e.C_)(["form-select",{"is-invalid":!0===O.try_post&&""===O.transaction.transaction_from}]),"onUpdate:modelValue":t[1]||(t[1]=a=>O.transaction.transaction_from=a),"aria-describedby":"Bank-validation",required:""},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(O.account_table,(a=>((0,o.wg)(),(0,o.iD)("option",{key:a,value:a.accountnumber},(0,e.zw)(a.nickname),9,d)))),128))],2),[[s.bM,O.transaction.transaction_from]]),u]),(0,o._)("div",h,[p,(0,o.wy)((0,o._)("select",{id:"card",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=a=>O.transaction.transaction_from_card=a)},[y,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(O.card_table,(a=>((0,o.wg)(),(0,o.iD)("option",{key:a,value:a.cardnumber},(0,e.zw)(a.nickname),9,g)))),128))],512),[[s.bM,O.transaction.transaction_from_card]])]),(0,o._)("div",b,[f,(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{type:"text",class:(0,e.C_)(["form-control",{"is-invalid":!0===O.try_post&&(!R.exist_history_name||""===O.transaction.transaction_to_name)}]),id:"to-name",list:"company-names","onUpdate:modelValue":t[3]||(t[3]=a=>O.transaction.transaction_to_name=a),"aria-describedby":"To-validation",required:""},null,2),[[s.nr,O.transaction.transaction_to_name]]),(0,o._)("datalist",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(O.company_table,((a,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:a.company_accountname},null,8,k)))),128))]),H,(0,o.wy)((0,o._)("input",{type:"text",class:(0,e.C_)(["form-control",{"is-invalid":!0===O.try_post_supplier&&""===O.to_company.company_commonname,"is-valid":!0===O.try_post_supplier&&""!==O.to_company.company_commonname}]),id:"to-nickname","onUpdate:modelValue":t[4]||(t[4]=a=>O.to_company.company_commonname=a),"aria-describedby":"To-Create-validation"},null,2),[[s.nr,O.to_company.company_commonname]]),R.exist_history_name?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-secondary",onClick:t[5]||(t[5]=a=>R.post_history_name())}," 등록 ")),x])]),(0,o._)("div",D,[Z,(0,o._)("div",C,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[6]||(t[6]=a=>O.transaction.main_category=a)},null,512),[[s.nr,O.transaction.main_category]]),U,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"to-nickname","onUpdate:modelValue":t[7]||(t[7]=a=>O.to_company.category_hook=a)},null,512),[[s.nr,O.to_company.category_hook]])])]),(0,o._)("div",V,[T,(0,o._)("div",M,[(0,o.Wm)(W,{hashtags:O.transaction.sub_category,onRemoveHashtag:R.removeHashtag},null,8,["hashtags","onRemoveHashtag"]),(0,o.wy)((0,o._)("input",{type:"text",id:"add_hashtag",placeholder:"Add hashtag",size:0==O.newHashtag.length?7:O.newHashtag.length,"onUpdate:modelValue":t[8]||(t[8]=a=>O.newHashtag=a),onKeyup:t[9]||(t[9]=(0,s.D2)(((...a)=>R.addHashtag&&R.addHashtag(...a)),["enter"]))},null,40,Y),[[s.nr,O.newHashtag]])])]),(0,o._)("div",q,[$,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"deposit","onUpdate:modelValue":t[10]||(t[10]=a=>O.transaction.deposit_amount=a)},null,512),[[s.nr,O.transaction.deposit_amount]])]),(0,o._)("div",j,[z,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"withdrawal","onUpdate:modelValue":t[11]||(t[11]=a=>O.transaction.withdrawal_amount=a)},null,512),[[s.nr,O.transaction.withdrawal_amount]])]),(0,o._)("div",K,[A,(0,o.wy)((0,o._)("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[12]||(t[12]=a=>O.transaction.description=a)},null,512),[[s.nr,O.transaction.description]])]),(0,o._)("div",F,[(0,o._)("button",{class:"btn btn-primary mx-2 btn-lg",onClick:t[13]||(t[13]=a=>R.confirm_changes())}," 추가 "),(0,o._)("button",{class:"btn btn-secondary mx-2 btn-lg",onClick:t[14]||(t[14]=a=>R.cancel_changes())}," 취소 ")])]),B],64)}n(7658);var O=n(7421),R=n(5939);const W=n(4806);var E={components:{Hashtag:O.Z},data(){return{try_post:!1,try_post_supplier:!1,transaction:{transaction_time:"",transaction_from:"",transaction_from_card:"",transaction_to_name:"",main_category:"미지정",sub_category:[],deposit_amount:0,withdrawal_amount:0,description:""},to_company:{company_commonname:"",category_hook:""},account_table:{},card_table:{},company_table:{},hashtag_table:{},newHashtag:""}},computed:{exist_history_name(){const a=Object.values(this.company_table).map((a=>a.company_accountname));return""==this.transaction.transaction_to_name||a.includes(this.transaction.transaction_to_name)}},mounted(){this.get_table(),this.get_hastags()},methods:{get_table(){R.Z.get("api/v1/account_management/bank_account/").then((a=>{this.account_table=a.data})).catch((a=>{console.error(a)})),R.Z.get("api/v1/account_management/card_account/").then((a=>{this.card_table=a.data})).catch((a=>{console.error(a)})),R.Z.get("api/v1/account_record/Company_nickname/").then((a=>{this.company_table=a.data})).catch((a=>{console.error(a)}))},async get_hastags(){await R.Z.get("api/v1/hashtag/").then((a=>{this.hashtag_table=a.data})).catch((a=>{console.log(a)}))},delete_transition(){const a=confirm("거래내역을 삭제합니까?");a&&R.Z["delete"]("api/v1/account_record/Transaction_All/"+this.$route.params.transactionId+"/")},post_history_name(){if(this.try_post_supplier=!0,""===this.to_company.company_commonname)return alert("별칭을 입력하세요"),!1;R.Z.post("api/v1/account_record/Company_nickname/",{company_accountname:this.transaction.transaction_to_name,company_commonname:this.to_company.company_commonname}).then((()=>{alert("등록 되었습니다."),this.get_table()})).catch((a=>{console.error(a)}))},addHashtag(){""!==this.newHashtag.trim()&&(this.transaction.sub_category.push(this.newHashtag.trim()),this.newHashtag="")},removeHashtag(a){this.transaction.sub_category.splice(a,1),this.changed=!0},async confirm_changes(){if(this.try_post=!0,""===this.transaction.transaction_time)return!1;if(""===this.transaction.transaction_from)return!1;if(""===this.transaction.transaction_to_name)return!1;if(!this.exist_history_name)return!1;const a=confirm("거래내역을 추가합니다");if(!a)return!1;const t=Object.values(this.hashtag_table).map((a=>a.sub_category)),n=W.reject(this.transaction.sub_category,(a=>t.includes(a)));await R.Z.all(n.map((a=>R.Z.post("api/v1/account_record/Hashtag/",{sub_category:a})))).catch((a=>{console.log(a)})),R.Z.post("api/v1/account_record/Transaction_All/"+this.$route.params.transactionId+"/",{transaction_time:this.transaction.transaction_time,transaction_from:this.transaction.transaction_from,transaction_from_card:this.transaction.transaction_from_card,transaction_to_name:this.transaction.transaction_to_name.trim(),deposit_amount:this.transaction.deposit_amount,withdrawal_amount:this.transaction.withdrawal_amount,main_category:this.transaction.main_category,sub_category:this.transaction.sub_category,description:this.transaction.description}).then((()=>{alert("변경사항이 저장되었습니다"),this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})})).catch((a=>{console.error(a)})),this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})},cancel_changes(){if(this.changed){const a=confirm("변경사항을 저장하지 않고 나갑니까?");if(!a)return!1}this.$router.push({name:"TransactionManagement",query:{year:new Date(this.transaction.transaction_time).getFullYear(),month:new Date(this.transaction.transaction_time).getMonth()+1}})}}},G=n(89);const J=(0,G.Z)(E,[["render",I]]);var L=J}}]);
//# sourceMappingURL=628.bcbacb35.js.map